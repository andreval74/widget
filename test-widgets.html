<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Widgets com Dados</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>
<body data-theme="dark">
    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-vials me-2"></i>Teste - Widgets Page Manager</h5>
                    </div>
                    <div class="card-body">
                        <!-- Reproduzir a se√ß√£o de widgets com dados de teste -->
                        <div class="widgets-section">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h2>üß© Meus Widgets de Venda</h2>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-primary" onclick="console.log('Criar Widget')">
                                        <i class="fas fa-plus"></i> Criar Widget
                                    </button>
                                    <button class="btn btn-outline-primary" onclick="testWithData()">
                                        <i class="fas fa-database"></i> Testar com Dados
                                    </button>
                                </div>
                            </div>

                            <!-- Filtros -->
                            <div class="card mb-4">
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-md-3">
                                            <label class="form-label">Status</label>
                                            <select class="form-select" id="filter-status">
                                                <option value="">Todos</option>
                                                <option value="active">Ativo</option>
                                                <option value="paused">Pausado</option>
                                                <option value="draft">Rascunho</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label">Per√≠odo</label>
                                            <select class="form-select" id="filter-period">
                                                <option value="">Todos</option>
                                                <option value="week">√öltima semana</option>
                                                <option value="month">√öltimo m√™s</option>
                                                <option value="quarter">√öltimo trimestre</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Buscar</label>
                                            <input type="text" class="form-control" id="search-widgets" placeholder="Nome do token ou widget...">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Lista de Widgets -->
                            <div id="widgets-list">
                                <div class="text-center py-5">
                                    <i class="fas fa-search fa-3x text-muted mb-3"></i>
                                    <p class="mt-3">Verificando widgets...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Controles de Teste -->
                        <div class="mt-4">
                            <h6>Controles de Teste:</h6>
                            <div class="d-flex gap-2">
                                <button class="btn btn-success btn-sm" onclick="testWithData()">
                                    <i class="fas fa-database me-1"></i>Carregar Dados de Teste
                                </button>
                                <button class="btn btn-warning btn-sm" onclick="testWithoutData()">
                                    <i class="fas fa-times me-1"></i>Limpar Dados
                                </button>
                                <button class="btn btn-info btn-sm" onclick="testUserLevel()">
                                    <i class="fas fa-user me-1"></i>Alternar Admin/User
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/modules/widgets-page-manager.js"></script>
    <script src="js/modules/user-level-manager.js"></script>

    <script>
        // Fun√ß√£o para testar com dados
        function testWithData() {
            if (window.widgetsPageManager) {
                // Simular dados mockados
                window.widgetsPageManager.widgets = [
                    {
                        id: 'widget-1',
                        name: 'Token Sale Widget',
                        token: 'MyToken (MTK)',
                        status: 'active',
                        sales: 45,
                        earnings: '1.23 BNB',
                        created: '2024-01-15'
                    },
                    {
                        id: 'widget-2', 
                        name: 'ICO Widget',
                        token: 'ICOToken (ICO)',
                        status: 'paused',
                        sales: 12,
                        earnings: '0.45 BNB',
                        created: '2024-01-10'
                    },
                    {
                        id: 'widget-3',
                        name: 'NFT Sale Widget',
                        token: 'NFTToken (NFT)',
                        status: 'active',
                        sales: 78,
                        earnings: '2.1 BNB',
                        created: '2024-02-01'
                    }
                ];
                
                window.widgetsPageManager.filteredWidgets = [...window.widgetsPageManager.widgets];
                window.widgetsPageManager.renderWidgets();
                
                console.log('‚úÖ Dados de teste carregados');
            }
        }

        // Fun√ß√£o para testar sem dados
        function testWithoutData() {
            if (window.widgetsPageManager) {
                window.widgetsPageManager.widgets = [];
                window.widgetsPageManager.filteredWidgets = [];
                window.widgetsPageManager.showEmptyState();
                
                console.log('üîÑ Dados limpos - mostrando estado vazio');
            }
        }

        // Fun√ß√£o para testar n√≠vel do usu√°rio
        function testUserLevel() {
            if (window.userLevelManager) {
                const currentLevel = window.userLevelManager.getUserLevel();
                const newLevel = currentLevel === 'admin' ? 'user' : 'admin';
                
                // Simular mudan√ßa de n√≠vel
                window.userLevelManager.userLevel = newLevel;
                window.userLevelManager.applyUserLevelStyles();
                
                console.log(`üîÑ N√≠vel alterado de ${currentLevel} para ${newLevel}`);
            }
        }

        // Auto-carregar quando ready
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                // Simular elemento de carteira para teste
                if (!document.getElementById('connected-wallet-address')) {
                    const walletDiv = document.createElement('div');
                    walletDiv.innerHTML = '<code class="badge bg-warning d-block text-center py-1 text-dark" id="connected-wallet-address" title="Clique para copiar">0x123...abc</code>';
                    
                    const walletInfo = document.createElement('div');
                    walletInfo.className = 'wallet-info mt-2 p-2 bg-dark rounded border';
                    walletInfo.appendChild(walletDiv);
                    
                    document.body.insertBefore(walletInfo, document.body.firstChild);
                }

                console.log('üß™ P√°gina de teste inicializada');
                console.log('üìù Use os bot√µes para testar diferentes estados');
            }, 500);
        });
    </script>
</body>
</html>